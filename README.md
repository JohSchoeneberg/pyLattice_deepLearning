# pyLattice_deepLearning

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

The things you need to train the CNNs:
* python 3.*
* Anaconda (tested on: conda 4.5.11)
* Jupyter Notebook (usually comes with Anaconda Cloud)

NOTE: Ensure that the Tensorflow backend in Keras is being used

### Installing

Steps to setup the environment on a computer

//TODO: Google Cloud

 1 . Clone this repository
 
 2 . Install these dependencies:
```
nibabel,
keras,
pytables,
nilearn,
SimpleITK,
nipype
```

 3 .  In train.py change line 6 to reflect the path of the tensorflow folder on your personal machine

```
sys.path.insert(0, '/home/gautham/bkly/LatticeLightSheet/pyLattice2/src/tensorflow/')
```

## Running the tests
// TODO: How to recreate model weights on machine/gcloud

## Making Inferences

Obtain the "punted_segmentation_model.h5" and "clathrin_data.h5" file and paste both under the clathrin directory.

Run the predict.py script

Look in the autogenerated prediction folder (under clathrin) for the inferences.

You can view these files quickly online at: https://brainbrowser.cbrain.mcgill.ca/volume-viewer

Load your own volume > NIfTI-1 file (Browse for the file)

It is recommended to open 3 tabs and load all 3 NIfTI-1 files from one validation folder (in the prediction folder) to see the differences in the raw data, truth, and predictions.


